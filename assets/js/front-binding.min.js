jQuery(function(o){function e(o){var e=i.scrollTop(),t=e+i.height(),r=o.offset().top,n=r+o.height()/2;return t>=n&&r>=e}function t(e,t){if("function"==typeof ga&&(t.type?ga("send","event",{eventCategory:"Form",eventAction:t.type,eventLabel:e.data("form_name")}):t.field&&ga("send","event",{eventCategory:"Form",eventAction:"Field:"+t.field,eventLabel:e.data("form_name")})),t.method){var r=new Image;r.src=formworks.frmwksurl+"?"+o.param(t)}}function r(o){o.is(":visible")&&!o.data("viewNotch")&&e(o)&&(t(o,{action:"frmwks_push",method:"add_notch",type:"view",form:o.data("form_id")}),o.data("viewNotch",!0))}function n(e){t(e,{action:"frmwks_push",type:"load",form:e.data("form_id")}),e.on("change","input,select,textarea",function(){var r=o(this),n=r.val();r.is(":checkbox")&&(r.is(":checked")||(n=null)),s&&s.abort(),s=t(e,{action:"frmwks_push",method:"add_partial",value:n,field:r.prop("name"),form:e.data("form_id")})}),e.on("focus","input,select,textarea",function(){e.data("engageNotch")?o(this).trigger("change"):(t(e,{action:"frmwks_push",method:"add_notch",type:"engage",form:e.data("form_id")}),e.data("engageNotch",!0))}),e.on("submit",function(){s&&s.abort()}),i.on("scroll",function(){r(e)}),r(e)}var s,a,i=o(window);if(formworks&&formworks.config&&formworks.config.selectors)for(var f=0;f<formworks.config.selectors.length;f++)a=o(formworks.config.selectors[f].selector),a.length&&(a.data("form_id",formworks.config.selectors[f].prefix+"_"+formworks.config.selectors[f].id),a.data("form_name",formworks.config.selectors[f].name),n(a));if("undefined"!=typeof formworks&&formworks.submissions&&null!==formworks.submissions)for(var f=0;f<formworks.submissions.length;f++)t(form,{action:"frmwks_push",type:"submission",form:formworks.submissions[f]})});