jQuery(function(t){function o(t){var o=i.scrollTop(),a=o+i.height(),n=t.offset().top,e=n+t.height()/2;return a>=e&&n>=o}function a(o){return t.post(formworks.frmwksurl,o)}function n(t){t.is(":visible")&&!t.data("viewNotch")&&o(t)&&(a({action:"frmwks_push",method:"add_notch",type:"view",form:t.data("form_id")}),t.data("viewNotch",!0))}var e,r=t("form.caldera_forms_form, .gform_wrapper form"),i=t(window);r.each(function(){var o=t(this),r=o.find('[name="_cf_frm_id"]').length?o.find('[name="_cf_frm_id"]').val():o.prop("id");o.data("form_id",r),o.on("change","input,select,textarea",function(){var n=t(this),r=n.val();n.is(":checkbox")&&(n.is(":checked")||(r=null)),e&&e.abort(),e=a({action:"frmwks_push",method:"add_partial",value:r,field:n.prop("name"),form:o.data("form_id")})}),o.on("focus","input,select,textarea",function(){o.data("engageNotch")||(a({action:"frmwks_push",method:"add_notch",type:"engage",form:o.data("form_id")}),o.data("engageNotch",!0))}),o.on("submit",function(){e&&e.abort()}),i.on("scroll",function(){n(o)}),n(o)})});