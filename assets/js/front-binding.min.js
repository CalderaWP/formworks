jQuery(function(o){function e(o){var e=a.scrollTop(),r=e+a.height(),f=o.offset().top,t=f+o.height()/2;return r>=t&&f>=e}function r(e){if("function"==typeof ga){var r=e.form.split("_");if(1===r.length&&(r[0]="caldera"),"undefined"!=typeof formworks&&"undefined"!=typeof formworks.config.forms[r[0]]&&"undefined"!=typeof formworks.config.forms[r[0]].forms){var f=formworks.config.forms[r[0]].forms[e.form];e.type?ga("send","event",{eventCategory:"Form",eventAction:e.type,eventLabel:f}):e.field&&ga("send","event",{eventCategory:"Form",eventAction:"Field:"+e.field,eventLabel:f})}}if(e.method)return o.post(formworks.frmwksurl,e)}function f(o){o.is(":visible")&&!o.data("viewNotch")&&e(o)&&(r({action:"frmwks_push",method:"add_notch",type:"view",form:o.data("form_id")}),o.data("viewNotch",!0))}var t,n=o("form.caldera_forms_form, .gform_wrapper form, .wpcf7-form, .frm-show-form, .contact-form"),a=o(window);if(n.each(function(){var e=o(this),n=e.find('[name="_cf_frm_id"]').length?"caldera_"+e.find('[name="_cf_frm_id"]').val():e.prop("id");e.find('[name="_wpcf7"]').length&&(n="cf7_"+e.find('[name="_wpcf7"]').val()),e.find('[name="form_id"]').length&&(n="frmid_"+e.find('[name="form_id"]').val()),e.hasClass("contact-form")&&(n="jp_"+e.parent().prop("id").replace("contact-form-","")),e.data("form_id",n),r({action:"frmwks_push",type:"load",form:e.data("form_id")}),e.on("change","input,select,textarea",function(){var f=o(this),n=f.val();f.is(":checkbox")&&(f.is(":checked")||(n=null)),t&&t.abort(),t=r({action:"frmwks_push",method:"add_partial",value:n,field:f.prop("name"),form:e.data("form_id")})}),e.on("focus","input,select,textarea",function(){e.data("engageNotch")||(r({action:"frmwks_push",method:"add_notch",type:"engage",form:e.data("form_id")}),e.data("engageNotch",!0)),o(this).trigger("change")}),e.on("submit",function(){t&&t.abort()}),a.on("scroll",function(){f(e)}),f(e)}),"undefined"!=typeof formworks&&null!==formworks.submissions)for(var i=0;i<formworks.submissions.length;i++)r({action:"frmwks_push",type:"submission",form:formworks.submissions[i]})});