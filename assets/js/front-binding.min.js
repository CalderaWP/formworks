jQuery(function(o){function e(o){var e=a.scrollTop(),f=e+a.height(),n=o.offset().top,r=n+o.height()/2;return f>=r&&n>=e}function f(e){if("function"==typeof ga){var f=e.form.split("_");if(1===f.length&&(f[0]="caldera"),"undefined"!=typeof formworks&&"undefined"!=typeof formworks.config.forms[f[0]]&&"undefined"!=typeof formworks.config.forms[f[0]].forms){var n=formworks.config.forms[f[0]].forms[e.form];e.type?ga("send","event",{eventCategory:"Form",eventAction:e.type,eventLabel:n}):e.field&&ga("send","event",{eventCategory:"Form",eventAction:"Field:"+e.field,eventLabel:n})}}if(e.method)return o.post(formworks.frmwksurl,e)}function n(o){o.is(":visible")&&!o.data("viewNotch")&&e(o)&&(f({action:"frmwks_push",method:"add_notch",type:"view",form:o.data("form_id")}),o.data("viewNotch",!0))}var r,t=o("form.caldera_forms_form, .gform_wrapper form, .wpcf7-form, .frm-show-form, .contact-form"),a=o(window);if(t.each(function(){var e=o(this),t=e.find('[name="_cf_frm_id"]').length?e.find('[name="_cf_frm_id"]').val():e.prop("id");e.find('[name="_wpcf7"]').length&&(t="cf7_"+e.find('[name="_wpcf7"]').val()),e.find('[name="form_id"]').length&&(t="frmid_"+e.find('[name="form_id"]').val()),e.hasClass("contact-form")&&(t="jp_"+e.parent().prop("id").replace("contact-form-","")),e.data("form_id",t),f({action:"frmwks_push",type:"load",form:e.data("form_id")}),e.on("change","input,select,textarea",function(){var n=o(this),t=n.val();n.is(":checkbox")&&(n.is(":checked")||(t=null)),r&&r.abort(),r=f({action:"frmwks_push",method:"add_partial",value:t,field:n.prop("name"),form:e.data("form_id")})}),e.on("focus","input,select,textarea",function(){e.data("engageNotch")||(f({action:"frmwks_push",method:"add_notch",type:"engage",form:e.data("form_id")}),e.data("engageNotch",!0))}),e.on("submit",function(){r&&r.abort()}),a.on("scroll",function(){n(e)}),n(e)}),"undefined"!=typeof formworks&&null!==formworks.submissions)for(var i=0;i<formworks.submissions.length;i++)f({action:"frmwks_push",type:"submission",form:formworks.submissions[i]})});