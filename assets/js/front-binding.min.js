jQuery(function(o){function t(o){var t=e.scrollTop(),a=t+e.height(),n=o.offset().top,r=n+o.height()/2;return a>=r&&n>=t}function a(t){return o.post(formworks.frmwksurl,t)}function n(o){o.is(":visible")&&!o.data("viewNotch")&&t(o)&&(a({action:"frmwks_push",method:"add_notch",type:"view",form:o.data("form_id")}),o.data("viewNotch",!0))}var r,f=o("form.caldera_forms_form, .gform_wrapper form, .wpcf7-form, .frm-show-form, .contact-form"),e=o(window);f.each(function(){var t=o(this),f=t.find('[name="_cf_frm_id"]').length?t.find('[name="_cf_frm_id"]').val():t.prop("id");t.find('[name="_wpcf7"]').length&&(f="cf7_"+t.find('[name="_wpcf7"]').val()),t.find('[name="form_id"]').length&&(f="frmid_"+t.find('[name="form_id"]').val()),t.hasClass("contact-form")&&(f="jp_"+t.parent().prop("id").replace("contact-form-","")),t.data("form_id",f),t.on("change","input,select,textarea",function(){var n=o(this),f=n.val();n.is(":checkbox")&&(n.is(":checked")||(f=null)),r&&r.abort(),r=a({action:"frmwks_push",method:"add_partial",value:f,field:n.prop("name"),form:t.data("form_id")})}),t.on("focus","input,select,textarea",function(){t.data("engageNotch")||(a({action:"frmwks_push",method:"add_notch",type:"engage",form:t.data("form_id")}),t.data("engageNotch",!0))}),t.on("submit",function(){r&&r.abort()}),e.on("scroll",function(){n(t)}),n(t)})});