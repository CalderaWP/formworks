jQuery(function(o){function t(o){var t=r.scrollTop(),a=t+r.height(),n=o.offset().top,f=n+o.height()/2;return a>=f&&n>=t}function a(t){return o.post(formworks.frmwksurl,t)}function n(o){o.is(":visible")&&!o.data("viewNotch")&&t(o)&&(a({action:"frmwks_push",method:"add_notch",type:"view",form:o.data("form_id")}),o.data("viewNotch",!0))}var f,e=o("form.caldera_forms_form, .gform_wrapper form, .wpcf7-form, .frm-show-form"),r=o(window);e.each(function(){var t=o(this),e=t.find('[name="_cf_frm_id"]').length?t.find('[name="_cf_frm_id"]').val():t.prop("id");t.find('[name="_wpcf7"]').length&&(e="cf7_"+t.find('[name="_wpcf7"]').val()),t.find('[name="form_id"]').length&&(e="frmid_"+t.find('[name="form_id"]').val()),t.data("form_id",e),t.on("change","input,select,textarea",function(){var n=o(this),e=n.val();n.is(":checkbox")&&(n.is(":checked")||(e=null)),f&&f.abort(),f=a({action:"frmwks_push",method:"add_partial",value:e,field:n.prop("name"),form:t.data("form_id")})}),t.on("focus","input,select,textarea",function(){t.data("engageNotch")||(a({action:"frmwks_push",method:"add_notch",type:"engage",form:t.data("form_id")}),t.data("engageNotch",!0))}),t.on("submit",function(){f&&f.abort()}),r.on("scroll",function(){n(t)}),n(t)})});